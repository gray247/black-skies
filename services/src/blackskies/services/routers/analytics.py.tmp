{"patch":"*** Begin Patch\n*** Update File: services/src/blackskies/services/routers/analytics.py\n@@\n     except Exception as exc:  # pragma: no cover - defensive guard\n         diagnostics.log(\n             settings.project_base_dir / project_id,\n             code=\"INTERNAL\",\n             message=\"Analytics summary generation failed.\",\n             details={\"error\": str(exc)},\n         )\n         raise_service_error(\n             status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,\n             code=\"INTERNAL\",\n             message=\"Failed to generate analytics summary.\",\n             details={\"error\": str(exc)},\n             diagnostics=diagnostics,\n             project_root=settings.project_base_dir / project_id,\n         )\n+\n+\n+@router.get(\"/budget\")\n+async def get_analytics_budget(\n+    *,\n+    project_id: str = Query(..., min_length=1),\n+    settings: ServiceSettings = Depends(get_settings),\n+    diagnostics: DiagnosticLogger = Depends(get_diagnostics),\n+):\n+    \"\"\"Return the current budget status and runtime hints for a project.\"\"\"\n+\n+    project_root = settings.project_base_dir / project_id\n+    try:\n+        budget_service = BudgetService(settings=settings, diagnostics=diagnostics)\n+        state = budget_service.load_state(project_root)\n+    except Exception as exc:\n+        raise_service_error(\n+            status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,\n+            code=\"INTERNAL\",\n+            message=\"Failed to load budget information.\",\n+            details={\"error\": str(exc)},\n+            diagnostics=diagnostics,\n+            project_root=project_root,\n+        )\n+\n+    hint = \"stable\"\n+    if state.spent_usd >= state.hard_limit:\n+        hint = \"over_budget\"\n+    elif state.spent_usd >= state.soft_limit:\n+        hint = \"near_cap\"\n+    elif state.spent_usd <= state.soft_limit * 0.25:\n+        hint = \"ample\"\n+\n+    return {\n+        \"project_id\": project_id,\n+        \"budget\": {\n+            \"soft_limit_usd\": round(state.soft_limit, 2),\n+            \"hard_limit_usd\": round(state.hard_limit, 2),\n+            \"spent_usd\": round(state.spent_usd, 2),\n+            \"remaining_usd\": round(max(state.hard_limit - state.spent_usd, 0.0), 2),\n+        },\n+        \"hint\": hint,\n+    }\n*** End Patch"}
